{% extends "complaintManager/base.html" %}

{% block content %}
<div class="row">
	<div class="col-md-12">
		<div class="panel panel-default panel-light">
	    	<div class="panel-heading">
				<h3 class="panel-title">Pembuatan User Baru</h3>
			</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-md-12">
						<form method="POST" action="{% url 'complaintManager:user_create' %}">
							{% csrf_token %}
							<div class="form-group">
								<label class="control-label" for="{{ user_form.username.id_for_label }}">Username :</label>
								{{ user_form.username }}
								{% if user_form.username.errors %}
										<ul class="error-list">
										{% for error in user_form.username.errors %}
												<li style="color: red;">{{ error|escape }}</li>
										{% endfor %}
										</ul>
								{% endif %}
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ user_form.email.id_for_label }}">Email :</label>
								{{ user_form.email }}
								{% if user_form.email.errors %}
										<ul class="error-list">
										{% for error in user_form.email.errors %}
												<li style="color: red;">{{ error|escape }}</li>
										{% endfor %}
										</ul>
								{% endif %}
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ user_form.phone.id_for_label }}">Phone :</label>
								{{ member_form.phone }}
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ user_form.password.id_for_label }}">Password :</label>
								{{ user_form.password}}
								{% if user_form.password.errors %}
										<ul class="error-list">
										{% for error in user_form.password.errors %}
												<li style="color: red;">{{ error|escape }}</li>
										{% endfor %}
										</ul>
								{% endif %}
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ user_form.first_name.id_for_label }}">First Name :</label>
								{{ user_form.first_name }}
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ user_form.last_name.id_for_label }}">Last Name :</label>
								{{ user_form.last_name}}
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ member_form.origins.id_for_label }}e">Origin :</label>
								<select name="member_form-origins" id="id_member_form-origins" class="form-control" onchange="activateRoles()">
									<option value="" selected="">---------</option>
									<option value="1">Pimpinan</option>
									<option value="2">Unit ITB</option>
									<option value="3">Intern Direktorat Sarana dan Prasarana</option>
									<option value="4">Civitas</option>
									<option value="5">Eksternal ITB (Masyarakat, Tamu, dan Umum)</option>
								</select>
							</div>
							<div class="form-group">
								<label class="control-label" for="{{ member_form.roles.id_for_label }}e">Role :</label>
								<select name="member_form-roles" id="id_member_form-roles" class="form-control">
									<option value="" selected="">---------</option>
									<option value="1" id="PU" style="display: none;">Perawatan Utilitas</option>
									<option value="2" id="PG" style="display: none;">Perawatan Gedung</option>
									<option value="3" id="OG" style="display: none;">Operasional dan Kebersihan Gedung</option>
									<option value="4" id="KS" style="display: none;">Kebersihan dan Pengelolaan Sampah</option>
									<option value="5" id="IA" style="display: none;">Inventarisasi Aset</option>
									<option value="6" id="PDA" style="display: none;">Pendayagunaan Aset</option>
									<option value="7" id="PHA" style="display: none;">Penghapusan Aset</option>
									<option value="8" id="PD" style="display: none;">Penerimaan dan Distribusi</option>
									<option value="9" id="S" style="display: none;">Sekretariat</option>
									<option value="10" id="D" style="display: none;">Direktur</option>
									<option value="11" id="WD" style="display: none;">Wakil Direktur</option>
									<option value="12" id="KAI" style="display: none;">Kepala Subdit Pendayagunaan Aset dan Inventarisasi</option>
									<option value="13" id="KO" style="display: none;">Kepala Subdit Operasional dan Kebersihan</option>
									<option value="14" id="KPA" style="display: none;">Kepala Subdit Perawatan Aset</option>
									<option value="15" id="SA" style="display: none;">Superadmin</option>
								</select>
							</div>
							<button type="submit" class="btn btn-primary pull-right">Submit</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	function activateRoles() {
		var originSelected = document.getElementById('id_member_form-origins').selectedIndex;
		var internSapras = ['PU', 'PG', 'OG', 'KS', 'IA', 'PDA',
							'PHA', 'PD', 'S', 'D', 'WD', 'KAI', 'KO', 'KPA', 'SA'];
		
		setVisibility(internSapras, "hide");
		
		switch (originSelected) {
			case 1 :
				break;
			case 2 :
				break;
			case 3 :
				 setVisibility(internSapras, "show");
				break;
			case 4 :
				break;
			case 5 :
				break;
			default :
				break;
		}
	}

	function setVisibility(roleArray, roleVisibility) {
		for (i = 0; i < roleArray.length; i++) {
			changeVisibility(roleArray[i], roleVisibility);
		}
	}

	function changeVisibility(optionName, optionVisibility) {
		console.log(optionName);
		console.log(optionVisibility);
		if (optionVisibility === "show") {
			document.getElementById(optionName).style.display = "block";
			console.log("Changed to visible");
		} else if (optionVisibility === "hide") {
			document.getElementById(optionName).style.display = "none";
			console.log("Changed to none");
		}
		
	}
</script>

{% endblock %}
